<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>0066 LED Sim + JS IDE</title>
    <link rel="stylesheet" href="/assets/app.css" />
  </head>
  <body>
    <h1>0066 Cardputer LED Simulator + JS IDE</h1>
    <p class="muted">
      Pattern control uses <span class="mono">/api/status</span> and <span class="mono">/api/apply</span>.
      JS control uses <span class="mono">/api/js/eval</span> and <span class="mono">/ws</span>.
      <span class="pill bad" id="ws_status">ws: connecting</span>
    </p>

    <div class="grid">
      <div class="panel">
        <h3 style="margin-top:0">Patterns</h3>
        <div class="row">
          <button id="refresh" class="primary">Refresh status</button>
          <select id="type">
            <option value="off">off</option>
            <option value="rainbow" selected>rainbow</option>
            <option value="chase">chase</option>
            <option value="breathing">breathing</option>
            <option value="sparkle">sparkle</option>
          </select>
          <label>bri <input id="bri" type="number" min="1" max="100" value="25" style="width:72px" /></label>
          <label>frame_ms <input id="frame_ms" type="number" min="1" max="1000" value="16" style="width:84px" /></label>
          <button id="apply">Apply</button>
        </div>

        <div style="height:10px"></div>
        <pre id="status">(click refresh)</pre>
      </div>

      <div class="panel">
        <h3 style="margin-top:0">JS</h3>
        <div class="row">
          <button id="js_run" class="primary">Run</button>
          <button id="js_clear">Clear output</button>
          <span class="muted">Tip: use <span class="mono">emit(topic,payload)</span> to push events to the browser</span>
        </div>
        <div style="height:10px"></div>
        <textarea id="js_code" spellcheck="false"></textarea>
        <div style="height:10px"></div>
        <pre id="js_result"></pre>
      </div>
    </div>

    <div class="panel" style="margin-top:12px">
      <div class="row" style="justify-content: space-between">
        <h3 style="margin:0">WebSocket events</h3>
        <button id="ws_clear">Clear</button>
      </div>
      <div style="height:10px"></div>
      <pre id="ws_events"></pre>
    </div>

    <script src="/assets/app.js"></script>
  </body>
</html>
